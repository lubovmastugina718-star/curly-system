service

Improve error handling

# Add new utility function
